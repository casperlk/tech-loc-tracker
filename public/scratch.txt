<script>
      
    mapboxgl.accessToken = os.environ.get("MAPBOX_DEFAULT_PUBLIC")
    // mapboxgl.accessToken = 'pk.eyJ1IjoibHJnbzAiLCJhIjoiY2trdmYyeDkwMHJwcTJ4anUwNWYza2cweSJ9.v-6fwCBjjCbbtLlNnHXWYw';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
        center: [-74.5, 40], // starting position [lng, lat]
        zoom: 9 // starting zoom
  });
  </script>








from App.js
import './App.css';


function App() {
  // var marker = new mapboxgl.Marker({
  //   color: "#FFFFFF",
  //   draggable: true
  //   }).setLngLat([30.5, 50.5])
  //   .addTo(map);
  console.log("env: "+process.env.MAPBOX_DEFAULT_PUBLIC);
  return (
    <div className="App">
      
    </div>
  );
}

function Map() {
  return(
    <div>
      <div id='map' style='width: device-width; height: 600px;'></div>
    </div>
  )
}

// function Map() {
  
//     <div>
      
//       <script>
//       mapboxgl.accessToken = 'pk.eyJ1IjoibHJnbzAiLCJhIjoiY2trdmYyeDkwMHJwcTJ4anUwNWYza2cweSJ9.v-6fwCBjjCbbtLlNnHXWYw';
//       var map = new mapboxgl.Map({
//           container = 'map',
//           style = 'mapbox://styles/mapbox/streets-v11', // stylesheet location
//           center = [-74.5, 40], // starting position [lng, lat]
//           zoom= 9 // starting zoom
//       });
//       </script>
//     </div>
// }

export default App;







from app.css

.marker {
  background-image: url('mapbox-icon.png');
  background-size: cover;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
}





from index.html
from body:
<script>
      
    // mapboxgl.accessToken = os.environ.get("MAPBOX_DEFAULT_PUBLIC")
    mapboxgl.accessToken = 'pk.eyJ1IjoibHJnbzAiLCJhIjoiY2trdmYyeDkwMHJwcTJ4anUwNWYza2cweSJ9.v-6fwCBjjCbbtLlNnHXWYw';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
        center: [-74.5, 40], // starting position [lng, lat]
        zoom: 9 // starting zoom
  });
  </script>



from head:
<script src='https://api.mapbox.com/mapbox-gl-js/v2.1.0/mapbox-gl.js'></script>





index.js

import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
import mapboxgl from 'mapbox-gl';


mapboxgl.accessToken = 'pk.eyJ1IjoibHJnbzAiLCJhIjoiY2trdmYyeDkwMHJwcTJ4anUwNWYza2cweSJ9.v-6fwCBjjCbbtLlNnHXWYw';
class Application extends React.Component {
  constructor(props) {
  super(props);
  this.state = {
  lng: 5,
  lat: 34,
  zoom: 2
  };
  }
   
  componentDidMount() {
  const map = new mapboxgl.Map({
  container: this.mapContainer,
  style: 'mapbox://styles/mapbox/streets-v11',
  center: [this.state.lng, this.state.lat],
  zoom: this.state.zoom
  });
   
  map.on('move', () => {
  this.setState({
  lng: map.getCenter().lng.toFixed(4),
  lat: map.getCenter().lat.toFixed(4),
  zoom: map.getZoom().toFixed(2)
  });
  });
  }
   
  render() {
  return (
  <div>
  <div className='sidebarStyle'>
  <div>Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom: {this.state.zoom}</div>
  </div>
  <div ref={el => this.mapContainer = el} className='mapContainer' />
  </div>
  )
  }
  }
   

ReactDOM.render(
  <React.StrictMode>
    <Application />
    <App />
  </React.StrictMode>,
  document.getElementById('root')
);

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();



Removed from index.js
<Application />

   
  componentDidMount() {
  const map = new mapboxgl.Map({
  container: this.mapContainer,
  style: 'mapbox://styles/mapbox/streets-v11',
  center: [this.state.lng, this.state.lat],
  zoom: this.state.zoom
  });
   
  map.on('move', () => {
  this.setState({
  lng: map.getCenter().lng.toFixed(4),
  lat: map.getCenter().lat.toFixed(4),
  zoom: map.getZoom().toFixed(2)
  });
  });
  }
   
  render() {
  return (
  <div>
  <div className='sidebarStyle'>
  <div>Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom: {this.state.zoom}</div>
  </div>
  <div ref={el => this.mapContainer = el} className='mapContainer' />
  </div>
  )
  }
  }





  Removed from index.js

  // console.log("Access Token: "+process.env.REACT_APP_MAPBOX_DEFAULT_PUBLIC)
// mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_DEFAULT_PUBLIC;
class Application extends React.Component {
  constructor(props) {
  super(props);
  this.state = {
  lng: 5,
  lat: 34,
  zoom: 2
  };
 }
}








// {
//   "features": [
//     { "type": "Feature", "properties": { "id": 0,  "name": "Tech 3", "tsecs": 1592078400, "bearing": 0 }, "geometry": { "type": "Point", "coordinates": [ -115.606391900599817, 32.673693943392962 ] } },
//     { "type": "Feature", "properties": {  "id": 0,  "name": "Tech 1", "bearing": 45, "tsecs": 1592078400  }, "geometry": { "type": "Point", "coordinates": [ -115.585908073767968, 32.679083641964432 ] } },
//     { "type": "Feature", "properties": { "id": 0,   "name": "Tech 2", "bearing": 0, "tsecs": 1592078400 }, "geometry": { "type": "Point", "coordinates": [ -115.590876702138573, 32.676567128293193 ] } }
//   ],
//   "type": "FeatureCollection"
// }
// console.log('response: '  + this.response)






// function getTechLoc() {
//   geoJSON = 'http://127.0.0.1:5000/api/v1/solar_farms/000001/technicians'
// }

// function getColocatedTechs() {
//   notification = 'http://127.0.0.1:5000/api/v1/solar_farms/000001/colocated_technicians'
// }





async function apiRequest() {

  var request = new XMLHttpRequest()
  request.open('GET', TECH_LOC_API_URL + 'technicians', true)
  request.onload = function () {
    var data = JSON.parse(this.response)
    
    if (request.status >= 200 && request.status < 400) {
      return this.response
    } else {
      console.log('error')
    }
  }
  request.send()
}